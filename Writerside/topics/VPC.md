# VPC

h1. AWS Virtual Private Cloud (VPC)
- 가상의 격리된 프라이빗 네트워크
- AWS 리소스용 프라이빗 IP 범위를 정의 가능
- EC2, ELB와 같은 리소스를 서브넷에 두고 서브넷은 VPC 내에 있는 IP 주소의 모음으로 리소스를 그룹화
- 격리된 섹션에서는 사용자가 정의한 가상 네트워크에서 리소스를 시작할 수 있다.
- VPC 내에는 여러 서브넷으로 리소스를 구성할 수 있다.
- 서브넷은 리소스를 포함할 수 있는 VPC 섹션
- 단일 VPC에 여러 유형의 리소스를 위한 여러 유형의 게이트웨이가 연결될 수 있다.
- 명시적 허가 없이는 아무것도 출입할 수 없는 강화된 요새

VPC에서 서브넷을 사용해야 하는 유일한 기술적인 이유
- 게이트웨이에 대한 액세스 관리
- 퍼블릿 서브넷은 인터넷 게이트웨이에 액세스하여 인터넷으로 연결
- 프라이빗 서브넷은 연결 뿐만 아니라 트래픽 권한도 제어

인터넷 게이트웨이 - 인터넷의 퍼블릿 트래픽이 VPC에 액세스하도록 허용하려면 인터넷 게이트웨이를 VPC에 연결
가상 프라이빗 게이트웨이 - 프라이빗 리소스에 액세스하기 위해 사용 (VPN 연결), 길목은 공유되니 교통체증이 발생
프라이빗 서브넷 - 고객의 개인정보가 포함된 데이터 베이스를 격리
퍼블릭 서브넷 - 고객 대상 웹사이트를 지원

AWS 클라우드에서 호스팅 되는 애플리케이션에 데이터를 요청하면 요청은 패킷으로 전송
패킷은 인터넷이나 네트워크를 통해 전송되는 데이터 단위
1. 패킷은 인터넷 게이트웨이를 통해 VPC로 진입
2. 서브넷으로 들어가거나 서브넷에서 나오려면 권한을 확인
3. 사용 권한은 패킷을 보낸 사람과 패킷이 서브넷의 리소스와 통신하려는 방법
4. 네트워크 액세스 제어 목록 (ACL) - 패킷 권한을 확인하는 VPC 구성요소

네트워크 ACL
- 서브넷 수준에서 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽
- AWS 계정에는 기본 네트워크 ACL이 포함
- VPC를 구성할 때, 기본 네트워크 ACL을 사용하거나 사용자 지정 네트워크 ACL을 생성사용
- 기본 네트워크 ACL은 기본적으로 모든 인바운드 및 아웃바운드 트래픽을 허용,  사용자가 자체 규칙을 추가하여 수정 가능
- 사용자 지정 네트워크 ACL은 사용자가 허용할 트래픽을 지정하는 규칙을 추가할 때까지 모든 인, 아웃바운드 트래픽을 거부
- 모든 네트워크 ACL은 명시적 거부 규칙이 있음
- 스테이트리스 패킷 필터링 수행

스테이트리스 패킷 필터링
- 아무것도 기억하지 않고 각 방향으로 서브넷 경계를 통과하는 패킷만 확인
- 요청에 대한 패킷 응답이 서브넷으로 반환될 때 네트워크 ACL은 이전 요청을 기억하지 못함

보안그룹
- 인스턴스 수준에서 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽
- 기본적인 보안 그룹은 모든 인바운드 트래픽을 거부하고 모든 아웃바운드 트래픽을 허용
- 사용자 지정 규칙을 추가하여 허용해야 할 트래픽을 구성, 나머지 트래픽은 거부
- 스테이트풀 패킷 필터링 수행

스테이트풀 패킷 필터링
- 들어오는 패킷에 대한 이전 결정을 기억
- 요청에 대한 패킷응답이 인스턴스로 반환될 때 보안 그룹이 이전 요청을 기억

같은 서브넷에 여러 인스턴스가 존재할 때도 있지만 포트에 관해서는 다른 규칙이 적용
보안 그룹을 이용해 특정 트래픽으로진입을 허용

AWS Direct Connect
- 프라이빗한 연결을 최대한 짧은 지연시간과 최대한 높은 수준의 보안을 원할 때
- 완전히 비공개인 전용 광섬유 회선을 구축
- AWS VPC를 연결하는 물리적인 회선을 제공
- 높은 수준의 규제와 높은 수준의 규정 준수 요구 사항을 쉽게 충족하고 잠재적인 대역폭 문제도 방지
- 온프레미스 데이터 센터와 VPC간에 전용 연결을 설정

AWS Route 53
- 도메인 이름 시스템 (DNS)
- 사용자의 요청을 AWS에서 실행되는 인프라에 연결
- 사용자를 AWS 외부의 인프라로 라우팅
- 도메인 이름의 DNS 레코드 관리 기능(새도메인 직접 등록 혹은 기존 도메인 이름의 DNS 레코드 전송)
- 
